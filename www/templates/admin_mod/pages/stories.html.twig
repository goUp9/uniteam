{% extends "base.html.twig" %}
{% block main %}
    <main data-ng-controller="StoriesAdminCtrl as b">
        <div id="form_item">
            <form id="edit_item">
                <label>Article title:</label>
                <input type="text" data-ng-model="currentItem.title"/>
                <label>Article text:</label>
                <textarea ck-editor name="article" class="ckeditor ck" data-ng-model="currentItem.text"></textarea>
                <label>Article meta keywords (separate with comma):</label>
                <textarea data-ng-model="currentItem.keywordsString"></textarea>
                <input type="button" value="submit" data-ng-click="add_item(currentItemId)"/>
                <input type="button" value="clear" data-ng-click="clear_item()"/>
            </form>
        </div>
        <div id="items">
            <div class="item" data-ng-repeat="item in items">
                <img src="{{constant('LINKS_PRE')}}deployment/data/stories_covers/{{'{{item.cover}}'}}"/>
                <p class="title">{{'{{item.title}}'}}</p>
                <p class="date">{{'{{item.dateCreated}}'}}</p>
                <input type="button" value="edit" data-ng-click="chose_to_edit($index)"/>
                <input type="button" value="delete" data-ng-click="delete_item($index)"/> 
                <form method="post" enctype="multipart/form-data" action="{{constant('LINKS_PRE')}}admin/upload-stories-cover/">
                    <label>Choose image to use as cover:</label>
                    <input type="file" name="cover"/>
                    <input type="hidden" name="id" value="{{'{{item.id}}'}}"/>
                    <input type="submit" value="upload cover"/>
                </form>
            </div>
                <div id="pages">
                    <label>Go to page:</label>
                    <p data-ng-click="switch_page(p.page)" data-ng-repeat="p in pages">{{'{{p.page}}'}}</p>
                </div>
        </div>
    </main> 
{% endblock %}
